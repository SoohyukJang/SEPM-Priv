{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SoohyukJANG\\\\Documents\\\\GitHub\\\\SEPM-Priv\\\\SEPM\\\\src\\\\contexts\\\\AuthContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useState, useContext, useEffect } from 'react';\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged, GoogleAuthProvider, signInWithPopup, sendPasswordResetEmail } from 'firebase/auth';\nimport { auth, db } from '../firebase/config';\nimport { doc, setDoc, getDoc, serverTimestamp } from 'firebase/firestore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport function useAuth() {\n  _s();\n  return useContext(AuthContext);\n}\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport function AuthProvider({\n  children\n}) {\n  _s2();\n  const [currentUser, setCurrentUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  async function signup(email, password, displayName) {\n    try {\n      const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n      const user = userCredential.user;\n\n      // Create user document in Firestore\n      await setDoc(doc(db, 'users', user.uid), {\n        displayName,\n        email,\n        createdAt: serverTimestamp(),\n        updatedAt: serverTimestamp()\n      });\n      return user;\n    } catch (error) {\n      throw error;\n    }\n  }\n  async function login(email, password) {\n    try {\n      const userCredential = await signInWithEmailAndPassword(auth, email, password);\n      return userCredential.user;\n    } catch (error) {\n      throw error;\n    }\n  }\n  async function logout() {\n    try {\n      await signOut(auth);\n      return true;\n    } catch (error) {\n      console.error(\"Logout error:\", error);\n      throw error;\n    }\n  }\n  async function googleLogin() {\n    const provider = new GoogleAuthProvider();\n    try {\n      const result = await signInWithPopup(auth, provider);\n      const user = result.user;\n\n      // Check if user exists in Firestore\n      const userDoc = await getDoc(doc(db, 'users', user.uid));\n      if (!userDoc.exists()) {\n        // Create user document if it doesn't exist\n        await setDoc(doc(db, 'users', user.uid), {\n          displayName: user.displayName || '',\n          email: user.email,\n          photoURL: user.photoURL || '',\n          createdAt: serverTimestamp(),\n          updatedAt: serverTimestamp()\n        });\n      }\n      return user;\n    } catch (error) {\n      throw error;\n    }\n  }\n  async function resetPassword(email) {\n    try {\n      await sendPasswordResetEmail(auth, email);\n      return true;\n    } catch (error) {\n      throw error;\n    }\n  }\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, user => {\n      setCurrentUser(user);\n      setLoading(false);\n    });\n    return unsubscribe;\n  }, []);\n  const value = {\n    currentUser,\n    signup,\n    login,\n    logout,\n    googleLogin,\n    resetPassword\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: !loading && children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 5\n  }, this);\n}\n_s2(AuthProvider, \"+Bt7EujFHjK6mRV3YX1iAtSqXvQ=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","onAuthStateChanged","GoogleAuthProvider","signInWithPopup","sendPasswordResetEmail","auth","db","doc","setDoc","getDoc","serverTimestamp","jsxDEV","_jsxDEV","AuthContext","useAuth","_s","AuthProvider","children","_s2","currentUser","setCurrentUser","loading","setLoading","signup","email","password","displayName","userCredential","user","uid","createdAt","updatedAt","error","login","logout","console","googleLogin","provider","result","userDoc","exists","photoURL","resetPassword","unsubscribe","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/SoohyukJANG/Documents/GitHub/SEPM-Priv/SEPM/src/contexts/AuthContext.jsx"],"sourcesContent":["import React, { createContext, useState, useContext, useEffect } from 'react';\r\nimport { \r\n  createUserWithEmailAndPassword, \r\n  signInWithEmailAndPassword, \r\n  signOut, \r\n  onAuthStateChanged,\r\n  GoogleAuthProvider,\r\n  signInWithPopup,\r\n  sendPasswordResetEmail\r\n} from 'firebase/auth';\r\nimport { auth, db } from '../firebase/config';\r\nimport { doc, setDoc, getDoc, serverTimestamp } from 'firebase/firestore';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport function useAuth() {\r\n  return useContext(AuthContext);\r\n}\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  async function signup(email, password, displayName) {\r\n    try {\r\n      const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n      const user = userCredential.user;\r\n      \r\n      // Create user document in Firestore\r\n      await setDoc(doc(db, 'users', user.uid), {\r\n        displayName,\r\n        email,\r\n        createdAt: serverTimestamp(),\r\n        updatedAt: serverTimestamp()\r\n      });\r\n      \r\n      return user;\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n  \r\n  async function login(email, password) {\r\n    try {\r\n      const userCredential = await signInWithEmailAndPassword(auth, email, password);\r\n      return userCredential.user;\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n  \r\n  async function logout() {\r\n    try {\r\n      await signOut(auth);\r\n      return true;\r\n    } catch (error) {\r\n      console.error(\"Logout error:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n  \r\n  async function googleLogin() {\r\n    const provider = new GoogleAuthProvider();\r\n    try {\r\n      const result = await signInWithPopup(auth, provider);\r\n      const user = result.user;\r\n      \r\n      // Check if user exists in Firestore\r\n      const userDoc = await getDoc(doc(db, 'users', user.uid));\r\n      \r\n      if (!userDoc.exists()) {\r\n        // Create user document if it doesn't exist\r\n        await setDoc(doc(db, 'users', user.uid), {\r\n          displayName: user.displayName || '',\r\n          email: user.email,\r\n          photoURL: user.photoURL || '',\r\n          createdAt: serverTimestamp(),\r\n          updatedAt: serverTimestamp()\r\n        });\r\n      }\r\n      \r\n      return user;\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n  \r\n  async function resetPassword(email) {\r\n    try {\r\n      await sendPasswordResetEmail(auth, email);\r\n      return true;\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\r\n      setCurrentUser(user);\r\n      setLoading(false);\r\n    });\r\n    \r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  const value = {\r\n    currentUser,\r\n    signup,\r\n    login,\r\n    logout,\r\n    googleLogin,\r\n    resetPassword\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {!loading && children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}